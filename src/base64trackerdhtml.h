#ifndef _BASE64_HTML_H
#define _BASE64_HTML_H
static const char *html_code_base64 = "PGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPgogICAgPGhlYWQ+CiAgICA8dGl0bGU+RGF0YS9JbmRleCBNb25pdG9yPC90aXRsZT4KICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ij4KICAgIDxzdHlsZT4KICAgICAgICBib2R5LklFX003LCBib2R5LklFX004LCBib2R5LldpbjZ7Zm9udC1mYW1pbHk6IlNlZ29lIFVJIiwgVGFob21hLCBWZXJkYW5hLCBBcmlhbDt9CiAgICAgICAgYm9keS5TYWZhcml7bWluLXdpZHRoOjk4N3B4O30KICAgICAgICBib2R5LlNGX2lQaG9uZXstd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6bm9uZTt9CiAgICAgICAgYm9keQogICAgICAgIHsKICAgICAgICAgICAgbWFyZ2luOjA7Zm9udC1mYW1pbHk6VGFob21hLCBWZXJkYW5hLCBBcmlhbDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjojRkVGRUZFOwogICAgICAgICAgICBjb2xvcjojMzMzOwogICAgICAgICAgICBmb250LXNpemU6MTJwdDsKICAgICAgICAgICAgd2lkdGg6MTAwJTsKICAgICAgICAgICAgaGVpZ2h0OjEwMCU7CiAgICAgICAgfQogICAgICAgIGZvcm17bWFyZ2luOjBweDtkaXNwbGF5OiBpbmxpbmV9CiAgICAgICAgI21haW5mcmFtZXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGRUZFRkU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt9CiAgICAgICAgI3Rhc2t7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjojRjRGQkZGO2Rpc3BsYXk6aW5saW5lOwogICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICM4MUJFRjc7cGFkZGluZzowcHg7bGVmdDowcHg7dG9wOjBweDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO30KICAgICAgICAudGFza2xpc3R7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzowcHg7IGJhY2tncm91bmQtY29sb3I6I0QwRTlGNztoZWlnaHQ6MTAwJTt9CiAgICAgICAgLnRhc2t0aXRsZXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Y29sb3I6I2MwYzBjMDsgaGVpZ2h0OjMwcHg7fQogICAgICAgICN0YXNrc2VsZWN0e3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0QwRTlGNztjb2xvcjojMkY1RkExO3dpZHRoOjEwMCU7fQogICAgICAgICN0YXNrbGlzdHMgLnRhc2tsaXN0c3twb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGNEZCRkY7Y29sb3I6IzJGNUZBMTt9CiAgICAgICAgLnRhc2stdGl0bGV7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7aGVpZ2h0OjMwcHg7d2lkdGg6MTAwJTt9CiAgICAgICAgLnVsdGFie2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7bWFyZ2luOjA7d2lkdGg6MTAwJTt9CiAgICAgICAgLmx0YWJuYW1le2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMnB0O30KICAgICAgICAubHRhYntiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y3Vyc29yOiBwb2ludGVyO3dpZHRoOjEwMCU7fQogICAgICAgIC5sdGFiLXNlbGVjdGVke2JhY2tncm91bmQtY29sb3I6I0Y0RkJGRjtjdXJzb3I6IHBvaW50ZXI7d2lkdGg6MTAwJTt9CiAgICAgICAgLmxmbmFtZXtjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgIC5sdGFza3tiYWNrZ3JvdW5kLWNvbG9yOiNGNEZCRkY7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAubHRhc2stc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2N1cnNvcjogcG9pbnRlcjt9CiAgICAgICAgI25vZGVmb3Jte3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjcwMHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZjsKICAgICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmc6MTBweDt6LWluZGV4Ojk5O292ZXJmbG93OmF1dG87ZGlzcGxheTpub25lO30KICAgICAgICAjdGFza2Zvcm17cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NTAwcHg7aGVpZ2h0OjUwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmZmZmOwogICAgICAgICAgICBib3JkZXI6MXB4IHNvbGlkICM4MUJFRjc7cGFkZGluZy10b3A6MTBweDtwYWRkaW5nLWxlZnQ6NnB4O2ZvbnQtc2l6ZToxMnB0OwogICAgICAgICAgICBjb2xvcjojMkY1RkExO3otaW5kZXg6OTk7b3ZlcmZsb3c6YXV0bztkaXNwbGF5Om5vbmU7fQogICAgICAgIC5lYWRke2NvbG9yOiM1RkI0MDQ7Zm9udC1zaXplOjEzcHQ7Zm9udC13ZWlnaHQ6Ym9sZGVyO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAuZXVwZGF0ZXtjb2xvcjojRkY4MDAwO2ZvbnQtc2l6ZToxM3B0O2ZvbnQtd2VpZ2h0OmJvbGRlcjtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgLmVkZWxldGV7Y29sb3I6I0I0MDQ1Rjtmb250LXNpemU6MTNwdDtmb250LXdlaWdodDpib2xkZXI7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgIC5ldmlld3tjb2xvcjojMDAwMGZmO2ZvbnQtc2l6ZToxM3B0O2ZvbnQtd2VpZ2h0OmJvbGRlcjtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgLmNsb3NldHh0e2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMHB0O2NvbG9yOiNjY2NjY2M7dGV4dC1hbGlnbjpyaWdodDt9CiAgICAgICAgLm50YXNre2Rpc3BsYXk6aW5saW5lO2NvbG9yOnJlZDtmb250LXNpemU6MTJwdDt9CiAgICAgICAgPC9zdHlsZT4KICAgICAgICA8c2NyaXB0IGxhbmd1YWdlPSdqYXZhc2NyaXB0Jz4KICAgICAgICAgICAgdmFyIGNocmFkZCA9ICfinJonLCBjaHJmb2xkID0gJ+KWuicsIGNocnRyZWUgPSAn4pa8JywgY2hyZWRpdD0n4pyOJywgY2hyZGVsPSfinJgnLCBjaHJ2aWV3ID0gJ+KYnCAnOwogICAgICAgICAgICB2YXIgYmFzZTY0RW5jb2RlQ2hhcnMgPSAKICAgICAgICAgICAgIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iOwogICAgICAgICAgICB2YXIgYmFzZTY0RGVjb2RlQ2hhcnMgPSBuZXcgQXJyYXkoCiAgICAgICAgICAgIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLAogICAgICAgICAgICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwKICAgICAgICAgICAgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCA2MiwgLTEsIC0xLCAtMSwgNjMsCiAgICAgICAgICAgIDUyLCA1MywgNTQsIDU1LCA1NiwgNTcsIDU4LCA1OSwgNjAsIDYxLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLAogICAgICAgICAgICAtMSwgIDAsICAxLCAgMiwgIDMsICA0LCAgNSwgIDYsICA3LCAgOCwgIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwKICAgICAgICAgICAgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywgMjQsIDI1LCAtMSwgLTEsIC0xLCAtMSwgLTEsCiAgICAgICAgICAgIC0xLCAyNiwgMjcsIDI4LCAyOSwgMzAsIDMxLCAzMiwgMzMsIDM0LCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLAogICAgICAgICAgICA0MSwgNDIsIDQzLCA0NCwgNDUsIDQ2LCA0NywgNDgsIDQ5LCA1MCwgNTEsIC0xLCAtMSwgLTEsIC0xLCAtMSk7CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhc2U2NGVuY29kZShzdHIpIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgb3V0LCBpLCBsZW47CiAgICAgICAgICAgICAgICB2YXIgYzEsIGMyLCBjMzsKCiAgICAgICAgICAgICAgICBsZW4gPSBzdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICBjMSA9IHN0ci5jaGFyQ29kZUF0KGkrKykgJiAweGZmOwogICAgICAgICAgICAgICAgICAgIGlmKGkgPT0gbGVuKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdChjMSA+PiAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdCgoYzEgJiAweDMpIDw8IDQpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gIj09IjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBpZihpID09IGxlbikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoYzEgPj4gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKChjMSAmIDB4Myk8PCA0KSB8ICgoYzIgJiAweEYwKSA+PiA0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKGMyICYgMHhGKSA8PCAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9ICI9IjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGMzID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KGMxID4+IDIpOwogICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKChjMSAmIDB4Myk8PCA0KSB8ICgoYzIgJiAweEYwKSA+PiA0KSk7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdCgoKGMyICYgMHhGKSA8PCAyKSB8ICgoYzMgJiAweEMwKSA+PjYpKTsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KGMzICYgMHgzRik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhc2U2NGRlY29kZShzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjMSwgYzIsIGMzLCBjNDsKICAgICAgICAgICAgICAgIHZhciBpLCBsZW4sIG91dDsKCiAgICAgICAgICAgICAgICBsZW4gPSBzdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICAvKiBjMSAqLwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSBiYXNlNjREZWNvZGVDaGFyc1tzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZl07CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZShpIDwgbGVuICYmIGMxID09IC0xKTsKICAgICAgICAgICAgICAgICAgICBpZihjMSA9PSAtMSkKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgLyogYzIgKi8KICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gYmFzZTY0RGVjb2RlQ2hhcnNbc3RyLmNoYXJDb2RlQXQoaSsrKSAmIDB4ZmZdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjMiA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzIgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjMSA8PCAyKSB8ICgoYzIgJiAweDMwKSA+PiA0KSk7CgogICAgICAgICAgICAgICAgICAgIC8qIGMzICovCiAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBjMyA9IHN0ci5jaGFyQ29kZUF0KGkrKykgJiAweGZmOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjMyA9PSA2MSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgICAgICAgICAgICAgYzMgPSBiYXNlNjREZWNvZGVDaGFyc1tjM107CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZShpIDwgbGVuICYmIGMzID09IC0xKTsKICAgICAgICAgICAgICAgICAgICBpZihjMyA9PSAtMSkKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMiAmIDBYRikgPDwgNCkgfCAoKGMzICYgMHgzQykgPj4gMikpOwoKICAgICAgICAgICAgICAgICAgICAvKiBjNCAqLwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzQgPSBzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYzQgPT0gNjEpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGM0ID0gYmFzZTY0RGVjb2RlQ2hhcnNbYzRdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjNCA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzQgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMyAmIDB4MDMpIDw8IDYpIHwgYzQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB1dGYxNnRvOChzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvdXQsIGksIGxlbiwgYzsKICAgICAgICAgICAgICAgIG91dCA9ICIiOwogICAgICAgICAgICAgICAgbGVuID0gc3RyLmxlbmd0aDsKICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICAgICAgICAgIGlmICgoYyA+PSAweDAwMDEpICYmIChjIDw9IDB4MDA3RikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA+IDB4MDdGRikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEUwIHwgKChjID4+IDEyKSAmIDB4MEYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiAgNikgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ODAgfCAoKGMgPj4gIDApICYgMHgzRikpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEMwIHwgKChjID4+ICA2KSAmIDB4MUYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiAgMCkgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB1dGY4dG8xNihzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvdXQsIGksIGxlbiwgYzsKICAgICAgICAgICAgICAgIHZhciBjaGFyMiwgY2hhcjM7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIGxlbiA9IHN0ci5sZW5ndGg7CiAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2goYyA+PiA0KQogICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiBjYXNlIDI6IGNhc2UgMzogY2FzZSA0OiBjYXNlIDU6IGNhc2UgNjogY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAvLyAweHh4eHh4eAogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gc3RyLmNoYXJBdChpLTEpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjogY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTEweCB4eHh4ICAgMTB4eCB4eHh4CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgxRikgPDwgNikgfCAoY2hhcjIgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAvLyAxMTEwIHh4eHggIDEweHggeHh4eCAgMTB4eCB4eHh4CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hhcjMgPSBzdHIuY2hhckNvZGVBdChpKyspOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMgJiAweDBGKSA8PCAxMikgfAogICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIyICYgMHgzRikgPDwgNikgfAogICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIzICYgMHgzRikgPDwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzdGFydF93YWl0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnd2FpdCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3Zlcl93YWl0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnYXV0byc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYmFzZTY0c3RyZGVjb2RlKHN0cikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIHV0Zjh0bzE2KGJhc2U2NGRlY29kZShzdHIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0cmltKHN0cikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oXlxzK3xccyskKS8sICIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KF9lbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgX3BhcmVudEVsZW1lbnQgPSBfZWxlbWVudC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgaWYoX3BhcmVudEVsZW1lbnQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgX3BhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoX2VsZW1lbnQpOyAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaGlkZUJGcmFtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3V0RGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlWE1MSFRUUCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxodHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHhtbGh0dHBPYmogPSBbIk1TWE1MMi5YbWxIdHRwLjUuMCIsIk1TWE1MMi5YbWxIdHRwLjQuMCIsCiAgICAgICAgICAgICAgICAiTVNYTUwyLlhtbEh0dHAuMy4wIiwiTVNYTUwyLlhtbEh0dHAiLCJNaWNyb3NvZnQuWG1sSHR0cCJdOwogICAgICAgICAgICAgICAgaWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYod2luZG93LkFjdGl2ZVhPYmplY3QpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZm9yKGk9MDtpPHhtbGh0dHBPYmoubGVuZ3RoO2krKykgICAgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0cnl7eG1saHR0cCA9IG5ldyBBY3RpdmVYT2JqZWN0KHhtbGh0dHBPYmpbaV0pO2JyZWFrO30KICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSl7eG1saHR0cCA9IG51bGw7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NhbiBub3QgY3JlYXRlIFhNTEhUVFAgT2JqZWN0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4geG1saHR0cDsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2Nsb3NlIGZvcm0KICAgICAgICAgICAgZnVuY3Rpb24gQ2xvc2VUaGlzKGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gSGlkZVRhc2tmb3JtKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrZm9ybScpOwogICAgICAgICAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2hpZGRlbiBOb2RlRm9ybQogICAgICAgICAgICBmdW5jdGlvbiBIaWRlTm9kZWZvcm0oKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vZGVmb3JtJyk7CiAgICAgICAgICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIEhpZGVUYXNrZm9ybSgpCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBOb2RlWEFkZChlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciB4ID0gZS5jbGllbnRYICsgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgICAgICAgICAgICAgdmFyIHkgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJub2RlZm9ybSIpOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5sZWZ0ID0geDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUudG9wID0geSArIDEwOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICAvL292ZXJCRnJhbWUoWGRpdik7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyJub2RlZm9ybSJdOwogICAgICAgICAgICAgICAgZm9ybVsnb3AnXS52YWx1ZSA9IDE7CiAgICAgICAgICAgICAgICBmb3JtWydsaW1pdCddLnZhbHVlID0gMDsKICAgICAgICAgICAgICAgIGZvcm1bJ25hbWUnXS5mb2N1cygpOwogICAgICAgICAgICAgICAgZm9ybVsnbmFtZSddLnZhbHVlID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVGFza1hBZGQoZSwgbm9kZWlkLCBub2RldHlwZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHBvcnRsaXN0ID0gWyI0ODMyIiwgIjQ1MjAiLCAiNDcyOCJdOwogICAgICAgICAgICAgICAgdmFyIGJrcG9ydGxpc3QgPSBbIjQ0MTYiLCAiNDEwNCIsICI0MzEyIl07CiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKICAgICAgICAgICAgICAgIHZhciBYZGl2ID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0YXNrZm9ybSIpOwogICAgICAgICAgICAgICAgdmFyIHggPSBlLmNsaWVudFggKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CiAgICAgICAgICAgICAgICB2YXIgeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5sZWZ0ID0geDsKICAgICAgICAgICAgICAgIFhkaXYuc3R5bGUudG9wID0geSArIDEwOwogICAgICAgICAgICAgICAgWGRpdi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7CiAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWyJ0YXNrZm9ybSJdOwogICAgICAgICAgICAgICAgZm9ybVsnb3AnXS52YWx1ZSA9IDU7CiAgICAgICAgICAgICAgICBmb3JtWydub2RlaWQnXS52YWx1ZSA9IG5vZGVpZDsKICAgICAgICAgICAgICAgIGlmKG5vZGV0eXBlID49IDApCiAgICAgICAgICAgICAgICAgICAgZm9ybVsncG9ydCddLnZhbHVlID0gcG9ydGxpc3Rbbm9kZXR5cGVdOwogICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICBmb3JtWydwb3J0J10udmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGZvcm1bJ2lwJ10uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvcm1bJ2lwJ10udmFsdWUgPSAnJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9saXN0IG5vZGVzIAogICAgICAgICAgICBmdW5jdGlvbiBMaXN0Tm9kZXModHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgbm9kZWxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza3NlbGVjdCcpOwogICAgICAgICAgICAgICAgdmFyIG5vZGVzID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciByZXMgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAiIiwgY3NzID0gIiI7CiAgICAgICAgICAgICAgICBpZih0eHQgJiYgKHJlcyA9IGV2YWwodHh0KSkgJiYgbm9kZWxpc3QpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbm9kZWxpc3QuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICAgICAgaWYoKG5vZGVzID0gcmVzWydub2RlcyddKSAmJiByZXNbJ2NvdW50J10gPiAwKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAiPHVsIGNsYXNzPSd1bHRhYic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gbm9kZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW1pdCA9IG5vZGVzW3hdWydsaW1pdCddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhuYW1lID0gbm9kZXNbeF1bJ25hbWUnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbCA9IG5vZGVzW3hdWyd0b3RhbCddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPGxpIGNsYXNzPSdsdGFiJyBvbm1vdXNlbW92ZT1cIm9uRGl2KHRoaXMsICdsdGFiLXNlbGVjdGVkJylcIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICIgb25tb3VzZW91dD1cIm91dERpdih0aGlzLCAnbHRhYicpXCIgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8Zm9ybSBzdHlsZT0nJyBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiBvbnN1Ym1pdD0ncmV0dXJuIE5vZGVFZGl0KHRoaXMpOyc+IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPHNwYW4gY2xhc3M9J2x0YWJuYW1lJyBvbmNsaWNrPSdUYXNrTGlzdCgiK3grIiknIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiB0aXRsZT0n54K55Ye76L+b5YWl6IqC54K55Lu75Yqh566h55CGJyA+Iit4bmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIls8c3BhbiBjbGFzcz0nbnRhc2snID4iK3RvdGFsKyI8L3NwYW4+XTwvc3Bhbj4iOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwO+mZkOWItjoiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J25vZGVpZCcgdmFsdWU9JyIreCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29wJyB2YWx1ZT0nMyc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIjxpbnB1dCB0eXBlPXRleHQgbmFtZT0nbGltaXQnIHNpemU9MTIgdmFsdWU9JyIrbGltaXQrIic+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8c3BhbiBjbGFzcz0nZWRlbGV0ZScgdGl0bGU9J0RlbGV0ZScgIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiBvbmNsaWNrPVwiTm9kZURlbCgiK3grIilcIj4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8L2Zvcm0+PC9saT4iOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIjwvdWw+IjsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZWxpc3QuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydCh0eHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vbGlzdCB0YXNrcwogICAgICAgICAgICBmdW5jdGlvbiBMaXN0VGFza3ModHh0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgcmVzID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmKHR4dCAmJiAocmVzID0gZXZhbCh0eHQpKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZXR5cGVsaXN0ID0gWyJEb2NOb2RlIiwgIlBhcnNlck5vZGUiLCAiSW5kZXhOb2RlIl07CiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcmVzWydpZCddOwogICAgICAgICAgICAgICAgICAgIHZhciBub2RlbmFtZSA9IHJlc1snbmFtZSddOwogICAgICAgICAgICAgICAgICAgIHZhciBub2RldHlwZSA9IHJlc1sndHlwZSddOwogICAgICAgICAgICAgICAgICAgIHZhciBudGFza3MgPSByZXNbJ2NvdW50J107CiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gcmVzWyd0b3RhbCddOwogICAgICAgICAgICAgICAgICAgIHZhciBsaW1pdCA9IHJlc1snbGltaXQnXTsKICAgICAgICAgICAgICAgICAgICB2YXIgaG9zdCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBucGFja2V0cyA9IDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWxzdHIgPSAgIjx1bCBjbGFzcz0ndWx0YWInID4iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxsaSBjbGFzcz0ndGFzay10aXRsZSc+IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIueCueWHuzxzcGFuIGNsYXNzPSdlYWRkJyB0aXRsZT0nQ2xpY2sgQWRkIE5ldyBUYXNrJyAiOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiBvbmNsaWNrPVwiVGFza1hBZGQoZXZlbnQsJyIraWQrIicsJyIrbm9kZXR5cGUrIicpXCI+IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgK2NocmFkZCsiPC9zcGFuPua3u+WKoOS7u+WKoSI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICLoioLngrk6WzxzcGFuIGNsYXNzPSdudGFzayc+Iitub2RlbmFtZSsiPC9zcGFuPl0iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAi57G75Z6LOls8c3BhbiBjbGFzcz0nbnRhc2snPiIrbm9kZXR5cGVsaXN0W25vZGV0eXBlXSsiPC9zcGFuPl0iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAi5Lu75YqhOls8c3BhbiBjbGFzcz0nbnRhc2snPiIrbnRhc2tzKyI8L3NwYW4+XSI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICLntKLlvJU6WzxzcGFuIGNsYXNzPSdudGFzayc+Iit0b3RhbCsiPC9zcGFuPl0iOwogICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAi57Si5byV6ZmQ5Yi2Ols8c3BhbiBjbGFzcz0nbnRhc2snPiIrbGltaXQrIjwvc3Bhbj5dIjsKICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICI8L2xpPiI7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhc2tzID0gcmVzWyd0YXNrcyddOwogICAgICAgICAgICAgICAgICAgIGlmKHRhc2tzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGZvcih4IGluIHRhc2tzKQogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBob3N0ID0gdGFza3NbeF1bJ2hvc3QnXTsKICAgICAgICAgICAgICAgICAgICAgICAgbnBhY2tldHMgPSB0YXNrc1t4XVsnbnBhY2tldHMnXTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPGxpIGNsYXNzPSdsdGFzaycgIjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiIG9ubW91c2Vtb3ZlPVwib25EaXYodGhpcywgJ2x0YXNrLXNlbGVjdGVkJylcIiAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICIgb25tb3VzZW91dD1cIm91dERpdih0aGlzLCAnbHRhc2snKTtcIiA+IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiJm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPHNwYW4gY2xhc3M9J2xmbmFtZScgPiIraG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiWzxzcGFuIGNsYXNzPSdudGFzaycgPiIrbnBhY2tldHMrIjwvc3Bhbj5dPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjxzcGFuIGNsYXNzPSdlZGVsZXRlJyB0aXRsZT0nRGVsZXRlJyAiOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sc3RyICs9ICJvbmNsaWNrPVwiVGFza0RlbCgiK3grIilcIj4iK2NocmRlbCsiPC9zcGFuPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxzdHIgKz0gIjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbHN0ciArPSAiPC91bD4iOwogICAgICAgICAgICAgICAgICAgIHZhciBvdGFza2xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza2xpc3RzJyk7CiAgICAgICAgICAgICAgICAgICAgb3Rhc2tsaXN0LmlubmVySFRNTCA9IGh0bWxzdHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9saXN0IAogICAgICAgICAgICBmdW5jdGlvbiBsaXN0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9NCI7CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdE5vZGVzKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vYWRkCiAgICAgICAgICAgIGZ1bmN0aW9uIE5vZGVFZGl0KGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBub2RlbmFtZSA9ICIiOwogICAgICAgICAgICAgICAgdmFyIG5vZGV0eXBlID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgbm9kZWlkID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIiI7CiAgICAgICAgICAgICAgICBpZihmb3JtICYmIChvcCA9IGZvcm1bJ29wJ10udmFsdWUpID4gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZihvcCA9PSAxICYmIChub2RldHlwZSA9IGZvcm1bJ3R5cGUnXS52YWx1ZSkgPj0gMAogICAgICAgICAgICAgICAgICAgICAgICAmJiAobGltaXQgPSBmb3JtWydsaW1pdCddLnZhbHVlKSA+PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICYmIChub2RlbmFtZSA9IGZvcm1bJ25hbWUnXS52YWx1ZSkgIT0gIiIpCgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD0xJm5hbWU9Iitub2RlbmFtZSsiJnR5cGU9Iitub2RldHlwZSsiJmxpbWl0PSIrbGltaXQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYob3AgPT0gMiAmJiAobm9kZWlkID0gZm9ybVsnbm9kZWlkJ10udmFsdWUpID49IDApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPTImbm9kZWlkPSIrbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG9wID09IDMgJiYgKG5vZGVpZCA9IGZvcm1bJ25vZGVpZCddLnZhbHVlKSA+PSAwIAogICAgICAgICAgICAgICAgICAgICAgICAmJiAobGltaXQgPSBmb3JtWydsaW1pdCddLnZhbHVlKSA+PSAwKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD0zJm5vZGVpZD0iK25vZGVpZCsiJmxpbWl0PSIrbGltaXQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2UgYWxlcnQoIuivt+i+k+WFpeato+ehrueahOaVsOaNriIpOwogICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIaWRlTm9kZWZvcm0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0Tm9kZXMoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL2RlbCBub2RlCiAgICAgICAgICAgIGZ1bmN0aW9uIE5vZGVEZWwobm9kZWlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPTImbm9kZWlkPSIrbm9kZWlkOwogICAgICAgICAgICAgICAgaWYoYXJndiAmJiBjb25maXJtKCLnoa7orqTliKDpmaTor6XoioLngrk/IikgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGlkZU5vZGVmb3JtKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdE5vZGVzKHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVGFza0xpc3Qobm9kZWlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZigoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD03Jm5vZGVpZD0iK25vZGVpZDsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHhtbEh0dHAucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0VGFza3MoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBUYXNrRWRpdChmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgbm9kZWlkID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgaXAgPSAiIjsKICAgICAgICAgICAgICAgIHZhciBwb3J0ID0gLTEKICAgICAgICAgICAgICAgIGlmKChub2RlaWQgPSBmb3JtWydub2RlaWQnXS52YWx1ZSkgPj0gMCAmJiAoaXAgPSBmb3JtWydpcCddLnZhbHVlKSAKICAgICAgICAgICAgICAgICAgICAmJiAocG9ydCA9IGZvcm1bJ3BvcnQnXS52YWx1ZSkgPiAwICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPTUmaXA9IitpcCsiJnBvcnQ9Iitwb3J0KyImbm9kZWlkPSIrbm9kZWlkOwogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy8nLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhpZGVUYXNrZm9ybSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3RUYXNrcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBhbGVydCgi6K+36L6T5YWl5q2j56Gu55qE5Lu75Yqh5Y+C5pWwISIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vZGVsIG5vZGUKICAgICAgICAgICAgZnVuY3Rpb24gVGFza0RlbCh0YXNraWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9NiZ0YXNraWQ9Iit0YXNraWQ7CiAgICAgICAgICAgICAgICBpZihhcmd2ICYmIGNvbmZpcm0oIuehruiupOWIoOmZpOivpeS7u+WKoT8iKSAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIaWRlVGFza2Zvcm0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0VGFza3MoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL3NldCB0ZXJtIHN0YXR1cwogICAgICAgICAgICBmdW5jdGlvbiBTZXRUZXJtU3RhdHVzKGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgIHZhciBhcnIgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAiIjsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKHRleHQgPSBmb3JtWydmb3JiaWRkZW5zbGlzdCddLnZhbHVlKSkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gZm9ybVsnc3RhdHVzJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYoKGFyciA9IHRleHQuc3BsaXQoIlxuIikpICYmIGFyci5sZW5ndGggPiAwKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RhdHVzICE9IDApIGFyZ3YgPSAib3A9MTUmZm9yYmlkZGVucz0iOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlICBhcmd2ID0gIm9wPTE2JmZvcmJpZGRlbnM9IjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd2ICs9IGFycltpXSsiOyI7IAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKGFyZ3YgJiYgKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAnLycsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi5pON5L2c5oiQ5Yqf77yBIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1bJ2ZvcmJpZGRlbnNsaXN0J10udmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9zZXQgaXRlbSBzdGF0dXMKICAgICAgICAgICAgZnVuY3Rpb24gU2V0SXRlbVN0YXR1cyhmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgaWR0ZXh0ID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgIHZhciBhcnIgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAiIjsKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKGlkdGV4dCA9IGZvcm1bJ2lkbGlzdCddLnZhbHVlKSkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gZm9ybVsnc3RhdHVzJ10udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgaWYoKGFyciA9IGlkdGV4dC5zcGxpdCgiXG4iKSkgJiYgYXJyLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPTE0JmlkeF9zdGF0dXM9IjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd2ICs9IGFycltpXSsiOiIrc3RhdHVzKyI7IjsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChhcmd2KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5yZWFkeVN0YXRlPT00KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLmk43kvZzmiJDlip/vvIEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybVsnaWRsaXN0J10udmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiByZXN5bmMob2JqKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1saHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgdXJpID0gIm9wPTAiOwogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9wZW4oJ1BPU1QnLCAiLyIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCB1cmkubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi5pON5L2c5oiQ5YqfISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZCh1cmkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBhbGVydCgi6K+35rGC5aSx6LSlISIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpc3QoKTsKICAgICAgICA8L3NjcmlwdD4KICAgIDwvaGVhZD4KICAgIDwhLS0gPGJvZHkgb25sb2FkPSdqYXZhc2NyaXB0OmxvYWRJbml0KCk7Jz4gLS0+CiAgICA8Ym9keSBhbGlnbj1jZW50ZXIgPgogICAgPGRpdiBpZD0nbWFpbmZyYW1lJz4KICAgIDxkaXYgaWQ9J3Rhc2snPgogICAgICAgIDxkaXYgaWQ9dGFzay1oZWFkZXIgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDx0YWJsZSB3aWR0aD0xMDAlIGhlaWdodD0xMDAlIGNlbGxzcGFjaW5nPTAgYm9yZGVyPTAgdmFsaWduPXRvcCBhbGlnbj1sZWZ0ID4KICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9J3Rhc2tsaXN0JyB2YWxpZ249dG9wIHdpZHRoPTUwMCBoZWlnaHQ9MTAwJSA+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjZWxsc3BhY2luZz0wIGJvcmRlcj0wIHZhbGlnbj10b3AgYWxpZ249bGVmdCB3aWR0aD0xMDAlID4KICAgICAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249dG9wIGNsYXNzPSd0YXNrdGl0bGUnIHdpZHRoPTEwMCUgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOeCueWHuzxzcGFuIGNsYXNzPSdlYWRkJyB0aXRsZT0nQWRkJyBvbmNsaWNrPSdOb2RlWEFkZChldmVudCknPiDinJogPC9zcGFuPua3u+WKoOe0ouW8leiKgueCuQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1idXR0b24gbmFtZT0ncmVzeW5jJyB2YWx1ZT0n6YeN5paw5ZCM5q2l57Si5byVJyBvbmNsaWNrPSdyZXN5bmModGhpcyknID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249dG9wIHdpZHRoPTEwMCUgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J3Rhc2tzZWxlY3QnPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgdmFsaWduPXRvcCBjbGFzcz0ndGFza3RpdGxlJyB3aWR0aD0xMDAlID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJdGVtSUTnrqHnkIYo5q+P6KGM6L6T5YWl5LiA5LiqSUQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBuYW1lPSdpZHhsaXN0JyBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKTsnIG9uc3VibWl0PSdyZXR1cm4gU2V0SXRlbVN0YXR1cyh0aGlzKTsnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHZhbGlnbj10b3Agd2lkdGg9MTAwJSA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJROWIl+ihqDo8dGV4dGFyZWEgbmFtZT1pZGxpc3Qgcm93cz00IGNvbHM9MjA+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIOeKtuaAgTo8c2VsZWN0IG5hbWU9c3RhdHVzID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPTAgPueUn+aViDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9LTEgc2VsZWN0ZWQ+5aSx5pWIPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdPSyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgoKICAgICAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHZhbGlnbj10b3AgY2xhc3M9J3Rhc2t0aXRsZScgd2lkdGg9MTAwJSA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg5bGP6JS96K+N566h55CGKOavj+ihjOi+k+WFpeS4gOS4qikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIG5hbWU9J2ZvcmJpZGRlbnMnIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApOycgb25zdWJtaXQ9J3JldHVybiBTZXRUZXJtU3RhdHVzKHRoaXMpOyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgdmFsaWduPXRvcCB3aWR0aD0xMDAlID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIOWxj+iUveivjTo8dGV4dGFyZWEgbmFtZT1mb3JiaWRkZW5zbGlzdCByb3dzPTIwIGNvbHM9MjA+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIOeKtuaAgTo8c2VsZWN0IG5hbWU9c3RhdHVzID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPTAgPuWPlua2iDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9LTEgc2VsZWN0ZWQ+5bGP6JS9PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSdPSyc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHZhbGlnbj10b3AgYWxpZ249bGVmdCBjbGFzcz0ndGFza2xpc3RzJyBjZWxsc3BhY2luZz0wIGJvcmRlcj0wID4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSd0YXNrbGlzdHMnPjwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICA8L3RhYmxlPgogICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J25vZGVmb3JtJz4KICAgICAgICA8Zm9ybSBuYW1lPSdub2RlZm9ybScgYWN0aW9uPSdqYXZhc2NyaXB0OnZvaWQoMCk7JyBvbnN1Ym1pdD0ncmV0dXJuIE5vZGVFZGl0KHRoaXMpOyc+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdjbG9zZXR4dCcgb25jbGljaz0iQ2xvc2VUaGlzKHRoaXMpIiA+5YWz6ZetPC9zcGFuPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nb3AnIHZhbHVlPTEgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbm9kZWlkJyB2YWx1ZT0tMSA+CiAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0ndHlwZScgPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nLTEnIHNlbGVjdGVkPumAieaLqeexu+WIqzwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0nMCcgPkRvY05vZGU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9JzEnID5QYXJzZXJOb2RlPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPScyJyA+SW5kZXhOb2RlPC9vcHRpb24+CiAgICAgICAgICAgIDwvc2VsZWN0PiAKICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgIOWQjeensDo8aW5wdXQgdHlwZT10ZXh0IHNpemU9MzIgbmFtZT0nbmFtZScgPgogICAgICAgICAgICAmbmJzcDsmbmJzcDsKICAgICAgICAgICAg5pWw5o2u6ZmQ5Yi2OjxpbnB1dCB0eXBlPXRleHQgc2l6ZT0xMiBuYW1lPSdsaW1pdCc+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9J0FkZCc+CiAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9J3Rhc2tmb3JtJz4KICAgICAgICA8Zm9ybSBuYW1lPSd0YXNrZm9ybScgYWN0aW9uPSdqYXZhc2NyaXB0OnZvaWQoMCk7JyBvbnN1Ym1pdD0ncmV0dXJuIFRhc2tFZGl0KHRoaXMpOyc+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdjbG9zZXR4dCcgb25jbGljaz0iQ2xvc2VUaGlzKHRoaXMpIiA+5YWz6ZetPC9zcGFuPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nb3AnIHZhbHVlPTUgPgogICAgICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nbm9kZWlkJyB2YWx1ZT0tMSA+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPSd0eXBlJyB2YWx1ZT0tMSA+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICBJUDo8aW5wdXQgdHlwZT10ZXh0IHNpemU9MjAgbmFtZT0naXAnID46PGlucHV0IHR5cGU9dGV4dCBzaXplPTggbmFtZT0ncG9ydCc+CiAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICA8aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9J0FkZCc+CiAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KPC9ib2R5Pgo8L2h0bWw+Cg==";
#endif
