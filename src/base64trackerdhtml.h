#ifndef _BASE64_HTML_H
#define _BASE64_HTML_H
static const char *html_code_base64 = "PGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPgogICAgPGhlYWQ+CiAgICA8dGl0bGU+TWFzdGVyIE1vbml0b3I8L3RpdGxlPgogICAgPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLTgiPgogICAgPHN0eWxlPgogICAgICAgIGJvZHkuSUVfTTcsIGJvZHkuSUVfTTgsIGJvZHkuV2luNntmb250LWZhbWlseToiU2Vnb2UgVUkiLCBUYWhvbWEsIFZlcmRhbmEsIEFyaWFsO30KICAgICAgICBib2R5LlNhZmFyaXttaW4td2lkdGg6OTg3cHg7fQogICAgICAgIGJvZHkuU0ZfaVBob25ley13ZWJraXQtdGV4dC1zaXplLWFkanVzdDpub25lO30KICAgICAgICBib2R5CiAgICAgICAgewogICAgICAgICAgICBtYXJnaW46MDtmb250LWZhbWlseTpUYWhvbWEsIFZlcmRhbmEsIEFyaWFsOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiNGRUZFRkU7CiAgICAgICAgICAgIGNvbG9yOiMzMzM7CiAgICAgICAgICAgIGZvbnQtc2l6ZToxMnB0OwogICAgICAgICAgICB3aWR0aDoxMDAlOwogICAgICAgICAgICBoZWlnaHQ6MTAwJTsKICAgICAgICB9CiAgICAgICAgZm9ybXttYXJnaW46MHB4O2Rpc3BsYXk6IGlubGluZX0KICAgICAgICAjbWFpbmZyYW1le3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I0ZFRkVGRTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO30KICAgICAgICAjZGlza3twb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNGNEZCRkY7ZGlzcGxheTppbmxpbmU7CiAgICAgICAgICAgIGJvcmRlcjoxcHggc29saWQgIzgxQkVGNztwYWRkaW5nOjBweDtsZWZ0OjBweDt0b3A6MHB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7fQogICAgICAgIC5kaXNrbGlzdHtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjBweDsgYmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O3dpZHRoOjEwMCV9CiAgICAgICAgLmRpc2t0aXRsZXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kLWNvbG9yOiMyRjVGQTE7Y29sb3I6I2MwYzBjMDsgaGVpZ2h0OjMwcHg7fQogICAgICAgIC52aWV3dGl0bGV7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7IGhlaWdodDozMHB4O30KICAgICAgICAuaW5mb3ZpZXd7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzowcHg7IGJhY2tncm91bmQtY29sb3I6I0QwRTlGNzt3aWR0aDoxMDAlfQogICAgICAgICNkaXNrc3ZpZXd7cG9zaXRpb246cmVsYXRpdmU7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2NvbG9yOiMyRjVGQTE7d2lkdGg6MTAwJTt9CiAgICAgICAgLmRpc2stdGl0bGV7YmFja2dyb3VuZC1jb2xvcjojMkY1RkExO2NvbG9yOiNjMGMwYzA7aGVpZ2h0OjMwcHg7d2lkdGg6MTAwJTt9CiAgICAgICAgLnVsdGFie2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7bWFyZ2luOjA7d2lkdGg6MTAwJTt9CiAgICAgICAgLmx0YWJuYW1le2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMnB0O30KICAgICAgICAubHRhYntiYWNrZ3JvdW5kLWNvbG9yOiNEMEU5Rjc7Y3Vyc29yOiBwb2ludGVyO3dpZHRoOjEwMCU7fQogICAgICAgIC5odGFie2JhY2tncm91bmQtY29sb3I6IzJGNUZBMTtjb2xvcjojYzBjMGMwO3dpZHRoOjEwMCU7aGVpZ2h0OjMwcHg7fQogICAgICAgIC5sdGFiLXNlbGVjdGVke2JhY2tncm91bmQtY29sb3I6I0Y0RkJGRjtjdXJzb3I6IHBvaW50ZXI7d2lkdGg6MTAwJTt9CiAgICAgICAgLmxmbmFtZXtjdXJzb3I6IHBvaW50ZXI7fQogICAgICAgIC5sZGlza3tiYWNrZ3JvdW5kLWNvbG9yOiNGNEZCRkY7Y3Vyc29yOiBwb2ludGVyO30KICAgICAgICAubGRpc2stc2VsZWN0ZWR7YmFja2dyb3VuZC1jb2xvcjojRDBFOUY3O2N1cnNvcjogcG9pbnRlcjt9CiAgICAgICAgI2Rpc2tmb3Jte3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjUwMHB4O2hlaWdodDo1MHB4O2JhY2tncm91bmQtY29sb3I6I2ZmZmZmZjsKICAgICAgICAgICAgYm9yZGVyOjFweCBzb2xpZCAjODFCRUY3O3BhZGRpbmctdG9wOjEwcHg7cGFkZGluZy1sZWZ0OjZweDtmb250LXNpemU6MTJwdDsKICAgICAgICAgICAgY29sb3I6IzJGNUZBMTt6LWluZGV4Ojk5O292ZXJmbG93OmF1dG87ZGlzcGxheTpub25lO30KICAgICAgICAuZWFkZHtjb2xvcjojNUZCNDA0O2ZvbnQtc2l6ZToxM3B0O2ZvbnQtd2VpZ2h0OmJvbGRlcjtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgLmV1cGRhdGV7Y29sb3I6I0ZGODAwMDtmb250LXNpemU6MTNwdDtmb250LXdlaWdodDpib2xkZXI7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgIC5lZGVsZXRle2NvbG9yOiNCNDA0NUY7Zm9udC1zaXplOjEzcHQ7Zm9udC13ZWlnaHQ6Ym9sZGVyO2N1cnNvcjpwb2ludGVyO30KICAgICAgICAuZXZpZXd7Y29sb3I6IzAwMDBmZjtmb250LXNpemU6MTNwdDtmb250LXdlaWdodDpib2xkZXI7Y3Vyc29yOnBvaW50ZXI7fQogICAgICAgIC5jbG9zZXR4dHtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MTBwdDtjb2xvcjojY2NjY2NjO3RleHQtYWxpZ246cmlnaHQ7fQogICAgICAgIC5uZGlza3tkaXNwbGF5OmlubGluZTtjb2xvcjojRkY4MDAwO2ZvbnQtc2l6ZToxMnB0O2ZvbnQtd2VpZ2h0OmJvbGRlcjt9CiAgICAgICAgLnhkaXNre2Rpc3BsYXk6aW5saW5lO2NvbG9yOiM1RkI0MDQ7Zm9udC1zaXplOjEycHQ7Zm9udC13ZWlnaHQ6Ym9sZGVyO30KICAgICAgICA8L3N0eWxlPgogICAgICAgIDxzY3JpcHQgbGFuZ3VhZ2U9J2phdmFzY3JpcHQnPgogICAgICAgICAgICB2YXIgb1RpbWVyID0gbnVsbDsKICAgICAgICAgICAgdmFyIGNocmFkZCA9ICfinJonLCBjaHJmb2xkID0gJ+KWuicsIGNocnRyZWUgPSAn4pa8JywgY2hyZWRpdD0n4pyOJywgY2hyZGVsPSfinJgnLCBjaHJ2aWV3ID0gJ+KYnCAnOwogICAgICAgICAgICB2YXIgYmFzZTY0RW5jb2RlQ2hhcnMgPSAKICAgICAgICAgICAgIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iOwogICAgICAgICAgICB2YXIgYmFzZTY0RGVjb2RlQ2hhcnMgPSBuZXcgQXJyYXkoCiAgICAgICAgICAgIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLAogICAgICAgICAgICAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwKICAgICAgICAgICAgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLCA2MiwgLTEsIC0xLCAtMSwgNjMsCiAgICAgICAgICAgIDUyLCA1MywgNTQsIDU1LCA1NiwgNTcsIDU4LCA1OSwgNjAsIDYxLCAtMSwgLTEsIC0xLCAtMSwgLTEsIC0xLAogICAgICAgICAgICAtMSwgIDAsICAxLCAgMiwgIDMsICA0LCAgNSwgIDYsICA3LCAgOCwgIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwKICAgICAgICAgICAgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjEsIDIyLCAyMywgMjQsIDI1LCAtMSwgLTEsIC0xLCAtMSwgLTEsCiAgICAgICAgICAgIC0xLCAyNiwgMjcsIDI4LCAyOSwgMzAsIDMxLCAzMiwgMzMsIDM0LCAzNSwgMzYsIDM3LCAzOCwgMzksIDQwLAogICAgICAgICAgICA0MSwgNDIsIDQzLCA0NCwgNDUsIDQ2LCA0NywgNDgsIDQ5LCA1MCwgNTEsIC0xLCAtMSwgLTEsIC0xLCAtMSk7CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhc2U2NGVuY29kZShzdHIpIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgb3V0LCBpLCBsZW47CiAgICAgICAgICAgICAgICB2YXIgYzEsIGMyLCBjMzsKCiAgICAgICAgICAgICAgICBsZW4gPSBzdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICBjMSA9IHN0ci5jaGFyQ29kZUF0KGkrKykgJiAweGZmOwogICAgICAgICAgICAgICAgICAgIGlmKGkgPT0gbGVuKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdChjMSA+PiAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdCgoYzEgJiAweDMpIDw8IDQpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gIj09IjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBpZihpID09IGxlbikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoYzEgPj4gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKChjMSAmIDB4Myk8PCA0KSB8ICgoYzIgJiAweEYwKSA+PiA0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKGMyICYgMHhGKSA8PCAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9ICI9IjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGMzID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KGMxID4+IDIpOwogICAgICAgICAgICAgICAgICAgIG91dCArPSBiYXNlNjRFbmNvZGVDaGFycy5jaGFyQXQoKChjMSAmIDB4Myk8PCA0KSB8ICgoYzIgJiAweEYwKSA+PiA0KSk7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGJhc2U2NEVuY29kZUNoYXJzLmNoYXJBdCgoKGMyICYgMHhGKSA8PCAyKSB8ICgoYzMgJiAweEMwKSA+PjYpKTsKICAgICAgICAgICAgICAgICAgICBvdXQgKz0gYmFzZTY0RW5jb2RlQ2hhcnMuY2hhckF0KGMzICYgMHgzRik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGJhc2U2NGRlY29kZShzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBjMSwgYzIsIGMzLCBjNDsKICAgICAgICAgICAgICAgIHZhciBpLCBsZW4sIG91dDsKCiAgICAgICAgICAgICAgICBsZW4gPSBzdHIubGVuZ3RoOwogICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICAvKiBjMSAqLwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzEgPSBiYXNlNjREZWNvZGVDaGFyc1tzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZl07CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZShpIDwgbGVuICYmIGMxID09IC0xKTsKICAgICAgICAgICAgICAgICAgICBpZihjMSA9PSAtMSkKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgLyogYzIgKi8KICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIGMyID0gYmFzZTY0RGVjb2RlQ2hhcnNbc3RyLmNoYXJDb2RlQXQoaSsrKSAmIDB4ZmZdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjMiA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzIgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjMSA8PCAyKSB8ICgoYzIgJiAweDMwKSA+PiA0KSk7CgogICAgICAgICAgICAgICAgICAgIC8qIGMzICovCiAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBjMyA9IHN0ci5jaGFyQ29kZUF0KGkrKykgJiAweGZmOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjMyA9PSA2MSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgICAgICAgICAgICAgYzMgPSBiYXNlNjREZWNvZGVDaGFyc1tjM107CiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZShpIDwgbGVuICYmIGMzID09IC0xKTsKICAgICAgICAgICAgICAgICAgICBpZihjMyA9PSAtMSkKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMiAmIDBYRikgPDwgNCkgfCAoKGMzICYgMHgzQykgPj4gMikpOwoKICAgICAgICAgICAgICAgICAgICAvKiBjNCAqLwogICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzQgPSBzdHIuY2hhckNvZGVBdChpKyspICYgMHhmZjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYzQgPT0gNjEpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGM0ID0gYmFzZTY0RGVjb2RlQ2hhcnNbYzRdOwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUoaSA8IGxlbiAmJiBjNCA9PSAtMSk7CiAgICAgICAgICAgICAgICAgICAgaWYoYzQgPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMyAmIDB4MDMpIDw8IDYpIHwgYzQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB1dGYxNnRvOChzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvdXQsIGksIGxlbiwgYzsKICAgICAgICAgICAgICAgIG91dCA9ICIiOwogICAgICAgICAgICAgICAgbGVuID0gc3RyLmxlbmd0aDsKICAgICAgICAgICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpOwogICAgICAgICAgICAgICAgICAgIGlmICgoYyA+PSAweDAwMDEpICYmIChjIDw9IDB4MDA3RikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA+IDB4MDdGRikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEUwIHwgKChjID4+IDEyKSAmIDB4MEYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiAgNikgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ODAgfCAoKGMgPj4gIDApICYgMHgzRikpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEMwIHwgKChjID4+ICA2KSAmIDB4MUYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHg4MCB8ICgoYyA+PiAgMCkgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB1dGY4dG8xNihzdHIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBvdXQsIGksIGxlbiwgYzsKICAgICAgICAgICAgICAgIHZhciBjaGFyMiwgY2hhcjM7CiAgICAgICAgICAgICAgICBvdXQgPSAiIjsKICAgICAgICAgICAgICAgIGxlbiA9IHN0ci5sZW5ndGg7CiAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2goYyA+PiA0KQogICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiBjYXNlIDI6IGNhc2UgMzogY2FzZSA0OiBjYXNlIDU6IGNhc2UgNjogY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAvLyAweHh4eHh4eAogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gc3RyLmNoYXJBdChpLTEpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjogY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMTEweCB4eHh4ICAgMTB4eCB4eHh4CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgxRikgPDwgNikgfCAoY2hhcjIgJiAweDNGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAvLyAxMTEwIHh4eHggIDEweHggeHh4eCAgMTB4eCB4eHh4CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIyID0gc3RyLmNoYXJDb2RlQXQoaSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2hhcjMgPSBzdHIuY2hhckNvZGVBdChpKyspOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMgJiAweDBGKSA8PCAxMikgfAogICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIyICYgMHgzRikgPDwgNikgfAogICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIzICYgMHgzRikgPDwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzdGFydF93YWl0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnd2FpdCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3Zlcl93YWl0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSAnYXV0byc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYmFzZTY0c3RyZGVjb2RlKHN0cikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIHV0Zjh0bzE2KGJhc2U2NGRlY29kZShzdHIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0cmltKHN0cikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oXlxzK3xccyskKS8sICIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KF9lbGVtZW50KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgX3BhcmVudEVsZW1lbnQgPSBfZWxlbWVudC5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgaWYoX3BhcmVudEVsZW1lbnQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgX3BhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoX2VsZW1lbnQpOyAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaGlkZUJGcmFtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gb3V0RGl2KGRpdiwgY3NzTmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQ3JlYXRlWE1MSFRUUCgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxodHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHhtbGh0dHBPYmogPSBbIk1TWE1MMi5YbWxIdHRwLjUuMCIsIk1TWE1MMi5YbWxIdHRwLjQuMCIsCiAgICAgICAgICAgICAgICAiTVNYTUwyLlhtbEh0dHAuMy4wIiwiTVNYTUwyLlhtbEh0dHAiLCJNaWNyb3NvZnQuWG1sSHR0cCJdOwogICAgICAgICAgICAgICAgaWYod2luZG93LlhNTEh0dHBSZXF1ZXN0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYod2luZG93LkFjdGl2ZVhPYmplY3QpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZm9yKGk9MDtpPHhtbGh0dHBPYmoubGVuZ3RoO2krKykgICAgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0cnl7eG1saHR0cCA9IG5ldyBBY3RpdmVYT2JqZWN0KHhtbGh0dHBPYmpbaV0pO2JyZWFrO30KICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSl7eG1saHR0cCA9IG51bGw7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0NhbiBub3QgY3JlYXRlIFhNTEhUVFAgT2JqZWN0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4geG1saHR0cDsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2Nsb3NlIGZvcm0KICAgICAgICAgICAgZnVuY3Rpb24gQ2xvc2VUaGlzKGVsZW1lbnQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gQ2xlYXJEaXNrcygpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXNrc3ZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlza3N2aWV3Jyk7CiAgICAgICAgICAgICAgICBkaXNrc3ZpZXcuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2xpc3QgRGlza3MgCiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3REaXNrcyh0eHQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciBkaXNrc3ZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlza3N2aWV3Jyk7CiAgICAgICAgICAgICAgICB2YXIgZGlza3MgPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIHJlcyA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICIiLCBjc3MgPSAiIjsKICAgICAgICAgICAgICAgIGlmKHR4dCAmJiAocmVzID0gZXZhbCh0eHQpKSAmJiBkaXNrc3ZpZXcpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZGlza3N2aWV3LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgICAgIGlmKChub2RlcyA9IHJlc1snZGlza2xpc3QnXSkpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBvc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc2tzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvc2VsID0gZG9jdW1lbnQuZm9ybXNbJ2RhdGF2aWV3J11bJ2Rpc2tzJ107CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGogPSBvc2VsLmxlbmd0aCAtIDE7IGogPiAwOyBqLS0pCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9zZWwucmVtb3ZlKGopOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gIjx1bCBjbGFzcz0ndWx0YWInPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGogPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IoayBpbiBub2RlcykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlwID0gbm9kZXNba11bJ2lwJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlza3MgPSBub2Rlc1trXVsnZGlza3MnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIjxsaSBjbGFzcz0naHRhYic+IitpcCsiPC9saT4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHggaW4gZGlza3MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gZGlza3NbeF1bJ2lkJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcnQgPSBkaXNrc1t4XVsnc3BvcnQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSBkaXNrc1t4XVsnbGltaXQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZSA9IGRpc2tzW3hdWydtb2RlJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gZGlza3NbeF1bJ3RvdGFsJ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRsZWZ0ID0gZGlza3NbeF1bJ2xlZnQnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWxlZnQgPSBwYXJzZUludChkbGVmdC8oMTAyNCAqIDEwMjQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGFsbCA9IGRpc2tzW3hdWydhbGwnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFsbCA9IHBhcnNlSW50KGRhbGwvKDEwMjQgKiAxMDI0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRzY2FsZSA9IHBhcnNlSW50KChkbGVmdC9kYWxsKSAqIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hc2tzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm1hc2tzID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgczAgPSAiIiwgczEgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtb2RlID09IDApIHMwID0gInNlbGVjdGVkIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtb2RlID09IDEpIHMxID0gInNlbGVjdGVkIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvc2VsLm9wdGlvbnNbaisrXSA9IG5ldyBPcHRpb24oaXArIjoiK3BvcnQsIHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjc3MgPSAnbmRpc2snOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHggJSAyID09IDApIGNzcyA9ICd4ZGlzayc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPGxpIGNsYXNzPSdsdGFiJyBvbm1vdXNlbW92ZT1cIm9uRGl2KHRoaXMsICdsdGFiLXNlbGVjdGVkJylcIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiIG9ubW91c2VvdXQ9XCJvdXREaXYodGhpcywgJ2x0YWInKVwiID4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIjxmb3JtIHN0eWxlPScnIGFjdGlvbj0namF2YXNjcmlwdDp2b2lkKDApJyAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiBvbnN1Ym1pdD0ncmV0dXJuIGZhbHNlOyc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT0nZGlza2lkJyB2YWx1ZT0nIitpZCsiJz4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiWzxzcGFuIGNsYXNzPSciK2NzcysiJz4iK3grIjwvc3Bhbj5dIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIjxzZWxlY3QgbmFtZT0nbW9kZScgb25jaGFuZ2U9J2phdmFzY3JpcHQ6RGlza0VkaXQodGhpcy5mb3JtKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8b3B0aW9uIHZhbHVlPScwJyAiK3MwKyI+56OB55uY5a2Y5YKoPC9vcHRpb24+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8b3B0aW9uIHZhbHVlPScxJyAiK3MxKyI+bW1hcOWtmOWCqDwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPC9zZWxlY3Q+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIuerr+WPozpbPHNwYW4gY2xhc3M9JyIrY3NzKyInPiIrcG9ydCsiPC9zcGFuPl0iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIiZuYnNwOyZuYnNwOyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAi5Ymp5L2ZOls8c3BhbiBjbGFzcz0nIitjc3MrIic+Iitkc2NhbGUrIiU8L3NwYW4+IyIrbWxlZnQrIk0vIittYWxsKyJNXSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICLmgLvmlbA6WzxzcGFuIGNsYXNzPSciK2NzcysiJz4iK3RvdGFsKyI8L3NwYW4+XSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiJm5ic3A7Jm5ic3A7IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8aW5wdXQgdHlwZT10ZXh0IG5hbWU9J21hc2snIHNpemU9MTYgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPGlucHV0IHR5cGU9YnV0dG9uIHZhbHVlPSfmt7vliqDliIbnu4QnIG9uY2xpY2s9J01hc2tBZGQodGhpcy5mb3JtKSc+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICImbmJzcDsmbmJzcDsiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKChtYXNrcyA9IGRpc2tzW3hdWydtYXNrcyddKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIjxzZWxlY3QgbmFtZT0nbWFza2xpc3QnIG9uY2hhbmdlPSdNYXNrRHJvcCh0aGlzLCIreCsiKScgPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gIjxvcHRpb24gdmFsdWU9Jy0xJyBzZWxlY3RlZD7mlbDmja7liIbnu4Q8L29wdGlvbj4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8b3B0aW9uIHZhbHVlPSctMicgPumHjee9ruWIhue7hDwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihqIGluIG1hc2tzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8b3B0aW9uIHZhbHVlPSciK21hc2tzW2pdKyInPiIrbWFza3Nbal0rIjwvb3B0aW9uPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPC9zZWxlY3Q+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAiPC9mb3JtPjwvbGk+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICI8L3VsPiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2tzdmlldy5pbm5lckhUTUwgPSBodG1sOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHR4dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9pdGVtIHZpZXcgCiAgICAgICAgICAgIGZ1bmN0aW9uIGl0ZW12aWV3KGZvcm0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBkaXNraWQgPSAtMTsKICAgICAgICAgICAgICAgIHZhciBrZXkgPSBmb3JtWydpZCddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIHVyaSA9IGZvcm1bJ3VybCddLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIG8gPSBudWxsOwogICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAiIjsKICAgICAgICAgICAgICAgIGlmKChvID0gZm9ybVsnZGlza3MnXSkpIGRpc2tpZCA9IG8ub3B0aW9uc1tvLnNlbGVjdGVkSW5kZXhdLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIG94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzb252aWV3Jyk7CiAgICAgICAgICAgICAgICBpZihkaXNraWQgPj0gMCAmJiAodXJpICE9ICIiIHx8IGtleSAhPSAiIikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgb3guaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICAgICAgYXJndiA9ICJvcD01JmRpc2tpZD0iK2Rpc2tpZDsKICAgICAgICAgICAgICAgICAgICBpZihrZXkgIT0gIiIpIGFyZ3YgKz0gIiZpZD0iK2tleTsKICAgICAgICAgICAgICAgICAgICBpZih1cmkgIT0gIiIpIGFyZ3YgKz0gIiZ1cmw9IitiYXNlNjRlbmNvZGUodXJpKTsKICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImcmFuZD0iK01hdGgucmFuZG9tKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihhcmd2ICE9ICIiICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICI8dGV4dGFyZWEgY29scz0xNjAgcm93cz0zMD4iK3htbEh0dHAucmVzcG9uc2VUZXh0KyI8L3RleHRhcmVhPiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3guaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy9saXN0IAogICAgICAgICAgICBmdW5jdGlvbiBsaXN0KCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBudWxsOwogICAgICAgICAgICAgICAgaWYoKHhtbEh0dHAgPSBDcmVhdGVYTUxIVFRQKCkpICE9IG51bGwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3YgPSAib3A9MSZyYW5kPSIrTWF0aC5yYW5kb20oKTsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0RGlza3MoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL2FkZAogICAgICAgICAgICBmdW5jdGlvbiBEaXNrRWRpdChmb3JtKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgZGlza2lkID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgbyA9IG51bGw7CiAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICIiOwoKICAgICAgICAgICAgICAgIGlmKGZvcm0gJiYgKGRpc2tpZCA9IGZvcm1bJ2Rpc2tpZCddLnZhbHVlKSA+IDAKICAgICAgICAgICAgICAgICAgICAmJiAobyA9IGZvcm1bJ21vZGUnXSkgJiYgKG1vZGUgPSBvLm9wdGlvbnNbby5zZWxlY3RlZEluZGV4XS52YWx1ZSkgPj0gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ID0gIm9wPTImZGlza2lkPSIrZGlza2lkKyImbW9kZT0iK21vZGU7CiAgICAgICAgICAgICAgICAgICAgQ2xlYXJEaXNrcygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmd2ICs9ICImcmFuZD0iK01hdGgucmFuZG9tKCk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKCdQT1NUJywgJy8nLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtTGVuZ3RoIiwgYXJndi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3REaXNrcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKGFyZ3YpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vZGVsIGFsbCBub2RlCiAgICAgICAgICAgIGZ1bmN0aW9uIE1hc2tEcm9wKG8sZGlza2lkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgYXJndiA9ICJvcD00JmRpc2tpZD0iK2Rpc2tpZDsKICAgICAgICAgICAgICAgIGlmKChvLm9wdGlvbnNbby5zZWxlY3RlZEluZGV4XS52YWx1ZSkgPT0gLTIKICAgICAgICAgICAgICAgICAgICAmJiBhcmd2ICYmIGNvbmZpcm0oIuehruiupOenu+mZpOaJgOacieWIhue7hD8iKSA9PSB0cnVlIAogICAgICAgICAgICAgICAgICAgICYmICh4bWxIdHRwID0gQ3JlYXRlWE1MSFRUUCgpKSAhPSBudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIENsZWFyRGlza3MoKTsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGFyZ3YpOwogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LUxlbmd0aCIsIGFyZ3YubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnJlYWR5U3RhdGU9PTQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaXN0RGlza3MoeG1sSHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChhcmd2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvL2FkZCBtYXNrCiAgICAgICAgICAgIGZ1bmN0aW9uIE1hc2tBZGQoZm9ybSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGRpc2tpZCA9IDA7CiAgICAgICAgICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgICAgICAgICB2YXIgbWFzayA9ICIiOwogICAgICAgICAgICAgICAgaWYoZm9ybSAmJiAoZGlza2lkID0gZm9ybVsnZGlza2lkJ10udmFsdWUpID49IDAgJiYgKG1hc2sgPSBmb3JtWydtYXNrJ10udmFsdWUpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKChuID0gbWFzay5pbmRleE9mKCcvJykpIDwgMCB8fCBtYXNrLnN1YnN0cmluZyhuKzEpIDwgMSkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgn5YiG57uE5qC85byPOjIzOC54LngueC9uKG7kuLrpobrluo/lop7liqDliIbnu4TmlbDvvIzkuI3og73lsI/kuo4xKScpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBhcmd2ID0gIm9wPTMmZGlza2lkPSIrZGlza2lkKyImbWFzaz0iK21hc2s7CiAgICAgICAgICAgICAgICAgICAgaWYoYXJndiAmJiAoeG1sSHR0cCA9IENyZWF0ZVhNTEhUVFAoKSkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAub3BlbignUE9TVCcsICcvJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1MZW5ndGgiLCBhcmd2Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHhtbEh0dHAucmVhZHlTdGF0ZT09NCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDbGVhckRpc2tzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3REaXNrcyh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLmt7vliqDliIbnu4RbIittYXNrKyJd5aSx6LSlISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB4bWxIdHRwLnNlbmQoYXJndik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpc3QoKTsKICAgICAgICA8L3NjcmlwdD4KICAgIDwvaGVhZD4KICAgIDwhLS0gPGJvZHkgb25sb2FkPSdqYXZhc2NyaXB0OmxvYWRJbml0KCk7Jz4gLS0+CiAgICAgICAgPCEtLSA8Ym9keSBhbGlnbj1jZW50ZXIgb25sb2FkPSJsb2FkU3RhdGUoKSI+IC0tPgogICAgPGJvZHkgYWxpZ249Y2VudGVyID4KICAgIDxkaXYgaWQ9J21haW5mcmFtZSc+CiAgICA8ZGl2IGlkPSdkaXNrJz4KICAgICAgICA8ZGl2IGlkPWRpc2staGVhZGVyID48L2Rpdj4KICAgICAgICAgICAgPHRhYmxlIHdpZHRoPTEwMCUgaGVpZ2h0PTEwMCUgY2VsbHNwYWNpbmc9MCBib3JkZXI9MCB2YWxpZ249dG9wIGFsaWduPWxlZnQgPgogICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgIDxmb3JtIG5hbWU9J2RhdGF2aWV3JyBzdHlsZT0nJyBhY3Rpb249J2phdmFzY3JpcHQ6dm9pZCgwKScgb25zdWJtaXQ9InJldHVybiBpdGVtdmlldyh0aGlzKTsiID4KICAgICAgICAgICAgICAgICAgICA8dGQgIGNsYXNzPSd2aWV3dGl0bGUnIHZhbGlnbj10b3AgYWxpZ249bGVmdCA+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9J29wJyB2YWx1ZT0nNSc+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSdkaXNrcycgPjxvcHRpb24gdmFsdWU9LTEgPumAieaLqeWtmOWCqOiKgueCuTwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgICAgIElEOjxpbnB1dCB0eXBlPXRleHQgbmFtZT0naWQnIHNpemU9MzIgPgogICAgICAgICAgICAgICAgICAgIOaIluiAhVVSTDo8aW5wdXQgdHlwZT10ZXh0IG5hbWU9J3VybCcgc2l6ZT05NiA+CiAgICAgICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSfmn6Xor6InPgogICAgICAgICAgICAgICAgICAgIDxocj4KICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSdkaXNrbGlzdCcgdmFsaWduPXRvcCBhbGlnbj1sZWZ0ID4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSdkaXNrc3ZpZXcnPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxocj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSdqc29udmlldycgPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgIDwvdGFibGU+CiAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPC9kaXY+CjwvYm9keT4KPC9odG1sPgo=";
#endif
